<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="Content-Type" content="<?php echo $this->getContentType() ?>" />
<title><?php echo $this->getTitle() ?></title>
<meta name="description" content="<?php echo htmlspecialchars($this->getDescription()) ?>" />
<meta name="keywords" content="<?php echo htmlspecialchars($this->getKeywords()) ?>" />
<meta name="robots" content="<?php echo htmlspecialchars($this->getRobots()) ?>" />
<?php 
$zonda = Mage::helper('zonda');
$brands = Mage::helper('eternal_brands');
?>
<?php if ( $zonda->isResponsive() ) : ?>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<?php endif; ?>
<?php if ( $zonda->getFavicon() ) :?>
<link rel="icon" href="<?php echo $zonda->getFavicon(); ?>" type="image/x-icon" />
<link rel="shortcut icon" href="<?php echo $zonda->getFavicon(); ?>" type="image/x-icon" />
<?php else: ?>
<link rel="icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />
<link rel="shortcut icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />
<?php endif; ?>
<?php if ( $zonda->getIphoneIcon() ) : ?>
<link rel="apple-touch-icon-precomposed" href="<?php echo $zonda->getIphoneIcon(); ?>">
<?php endif; ?>

<?php if ( $zonda->getIphoneRetinaIcon() ) : ?>
<link rel="apple-touch-icon-precomposed" href="<?php echo $zonda->getIphoneRetinaIcon(); ?>">
<?php endif; ?>

<?php if ( $zonda->getIpadIcon() ) : ?>
<link rel="apple-touch-icon-precomposed" href="<?php echo $zonda->getIpadIcon(); ?>">
<?php endif; ?>

<?php if ( $zonda->getIpadRetinaIcon() ) : ?>
<link rel="apple-touch-icon-precomposed" href="<?php echo $zonda->getIpadRetinaIcon(); ?>">
<?php endif; ?>

<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = '<?php echo $this->helper('core/js')->getJsUrl('blank.html') ?>';
    var BLANK_IMG = '<?php echo $this->helper('core/js')->getJsUrl('spacer.gif') ?>';
//]]>
</script>
<![endif]-->

<?php // google fonts ?>
<?php
$fonts = array();
if ($zonda->getConfigDesign('general/body_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('general/body_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('general/title_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('general/title_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('general/button_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('general/button_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('general/label_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('general/label_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('header/header_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('header/header_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('top_menu/nav_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('top_menu/nav_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('top_menu/popup_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('top_menu/popup_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('footer/font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('footer/font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('footer/bottom_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('footer/bottom_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('breadcrumbs/bcs_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('breadcrumbs/bcs_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('category/banner_title_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('category/banner_title_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('category/banner_description_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('category/banner_description_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('category/toolbar_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('category/toolbar_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('product/price_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('product/price_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('product/name_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('product/name_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('product/labels_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('product/labels_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('product/review_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('product/review_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('product/description_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('product/description_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('tabs/tab_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('tabs/tab_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('block/block_title_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('block/block_title_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('block/category_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('block/category_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}
if ($zonda->getConfigDesign('block/sub_category_font_family_group') == 'google') {
    $font = $zonda->getConfigDesign('block/sub_category_font_family');
    if (!in_array($font, $fonts))
        $fonts[] = $font;
}


$font_family = '';
foreach ($fonts as $font)
    $font_family .= $font . ':300,400,400italic,500,600,700,700italic|';
if ($font_family) : ?>
<link href='//fonts.googleapis.com/css?family=<?php echo $font_family ?>&subset=latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese' rel='stylesheet' type='text/css' />
<?php endif; ?>

<?php /*** load standard style, javascript, etc. ***/ ?>
<script type="text/javascript" src="<?php echo $zonda->getJqueryUrl() ?>"></script>
<script type="text/javascript">jQuery.noConflict();</script>
<?php echo $this->getCssJsHtml() ?>
<?php echo $this->getChildHtml() ?>
<?php echo $this->helper('core/js')->getTranslatorScript() ?>
<?php echo $this->getIncludes() ?>
<script type="text/javascript">jQuery.noConflict();</script>
<?php if ( $zonda->isResponsive() ) : ?>
<script type="text/javascript">
    var ZONDA_RESPONSIVE = true;
</script>
<?php else : ?>
<script type="text/javascript">
    var ZONDA_RESPONSIVE = false;
</script>
<?php endif; ?>
<script type="text/javascript">
    var ZONDA_BRANDS_CUSTOM= <?php echo $brands->getConfig('slider/custom_enable') ?>;
</script>
<script type="text/javascript">
    var ZONDA_HEADER_TYPE = "<?php echo $zonda->getConfig('header/header_type')?>" ;
</script>
<script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery("select").each(function(){
            if (jQuery(this).css('display') != 'none') {
                jQuery(this).selectbox();
            }
        });
   });
</script>
<!-- temporary fix for ajaxcart conflict-->
<style>
    <?php echo Mage::getStoreConfig('ajaxcart/general/custom_css');?>
</style>
<?php
$loaderSrc = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).'ajaxcart/'.Mage::getStoreConfig('ajaxcart/general/loader_image');
$imageSize = getimagesize($loaderSrc);
if (!is_array($imageSize)){
    $loaderSrc = $this->getJsUrl('eternal/jquery/ajax-loader.gif');
}
?>
<div id="loading-mask">
    <div class ="background-overlay"></div>
    <p id="loading_mask_loader" class="loader">
        <img alt="Loading.." src='<?php echo $loaderSrc; ?>'/>
        <br/>Processing... Please wait...
    </p>
</div>
<div id="after-loading-success-message">
    <div class ="background-overlay"></div>
    <p id="success-message-container" class="loader" ><?php echo $this->__("Product was successfully added to your shopping cart.") ?>
        <br/><br/>
        <button type="button" name="finish_and_checkout" id="finish_and_checkout" class="button btn-cart" ><span><span>
	<?php $gotocarttext = Mage::getStoreConfig('ajaxcart/addtocart/gotocarttext');?>
    <?php if (!empty($gotocarttext)): ?>
        <?php echo $gotocarttext; ?>
    <?php else:?>
        <?php echo $this->__("Go to cart page") ?>
    <?php endif;?>
	</span></span></button>
        <br/><br/>
        <button type="button" name="continue_shopping" id="continue_shopping" class="button btn-cart" >
	<span><span>
	<?php $continueshoppingtext = Mage::getStoreConfig('ajaxcart/addtocart/continueshoppingtext');?>
    <?php if (!empty($continueshoppingtext)): ?>
        <?php echo $continueshoppingtext; ?>
    <?php else:?>
        <?php echo $this->__("Continue shopping") ?>
    <?php endif;?>
	</span></span></button>
</div>
<script type='text/javascript'>
    jQuery('#finish_and_checkout').click(function(){location.href = '<?php echo $this->getUrl('checkout/cart') ?>'});
    jQuery('#continue_shopping').click(function(){jQuery('#after-loading-success-message').fadeOut();});
</script>