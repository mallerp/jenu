<?php
class Schogini_Addtocart_Model_Update_Feed extends Schogini_Addtocart_Model_Update_Abstract { public function getFeedUrl() { return 'https://s3-us-west-2.amazonaws.com/schogini.biz/newsfeed/magento_feed.xml'; } public function check() { $spe58bb2 = 14 * 24 * 60 * 60; if (!Mage::app()->loadCache('schogini_notify_feed_lastcheck') || time() - Mage::app()->loadCache('schogini_update_feed_lastcheck') > $spe58bb2) { $this->refresh(); } } function refresh() { $sp0ab800 = array(); try { $spa826a5 = $this->getFeedData(); if (!$spa826a5) { return false; } foreach ($spa826a5->children()->channel->children() as $sp5c9b43 => $sp0471fb) { if ($sp5c9b43 == 'item') { if ($this->isExtensionInstalled($sp0471fb)) { $sp0ab800[] = array('severity' => intval($sp0471fb->severity), 'date_added' => $this->getDate((string) $sp0471fb->pubDate), 'title' => (string) $sp0471fb->title, 'description' => (string) $sp0471fb->description, 'url' => (string) $sp0471fb->link); } } } $spea861e = Mage::getModel('adminnotification/inbox'); if ($sp0ab800 && is_object($spea861e)) { $spea861e->parse($sp0ab800); } Mage::app()->saveCache(time(), 'schogini_update_feed_lastcheck'); return true; } catch (Exception $sp678ee6) { return false; } } public function isExtensionInstalled($sp0471fb) { return true; $sp4b897b = @explode(',', (string) $sp0471fb->extensions); $spb824a5 = array_keys((array) Mage::getConfig()->getNode('modules')->children()); foreach ($sp4b897b as $sp4b9e38) { foreach ($spb824a5 as $sp44d994) { if ($sp44d994 == $sp4b9e38) { return true; } } } return false; } }